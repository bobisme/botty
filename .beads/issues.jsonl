{"id":"bd-158","title":"Add resize command for agent terminal size","description":"Allow resizing an agent's terminal after spawn. Add 'botty resize <id> --rows N --cols M' command. Currently rows/cols are only configurable at spawn time via --rows and --cols flags.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T22:28:50.511196318Z","created_by":"bob","updated_at":"2026-01-25T22:33:50.554801117Z","closed_at":"2026-01-25T22:33:50.554771371Z","close_reason":"Added resize command to change agent terminal size after spawn","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-15s","title":"Implement prompt detection heuristics","description":"Detect common shell prompts ($ , > , etc.) and TUI ready states. Configurable patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:55:11.209017407Z","created_by":"bob","updated_at":"2026-01-25T16:57:23.974416031Z","closed_at":"2026-01-25T16:57:23.974397656Z","close_reason":"Added wait_for_prompt with common shell patterns, wait_for_prompt_custom, wait_for_absence, and contains helper","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-15s","depends_on_id":"bd-2vo","type":"blocks","created_at":"2026-01-25T16:55:15.855800150Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1a6","title":"Validate signal numbers in kill command","description":"Client-supplied signal number should be validated against allowlist (1-31) rather than silently falling back to SIGTERM.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T16:38:49.142902948Z","created_by":"bob","updated_at":"2026-01-25T16:43:22.228730243Z","closed_at":"2026-01-25T16:43:22.228708963Z","close_reason":"Added validation to reject signal numbers outside 1-31 range","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1b3","title":"Propagate exit code from exec command","description":"exec currently always returns 0 even if the command failed. Should capture and propagate the actual exit code so agents can detect failures.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T17:53:25.815552863Z","created_by":"bob","updated_at":"2026-01-25T18:01:51.312647607Z","closed_at":"2026-01-25T18:01:51.312614244Z","close_reason":"Implemented in commit e9e8dd4","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1dc","title":"Implement snapshot command","description":"Return normalized screen text from vt100 parser. Strip ANSI colors by default. Support --raw for full cell attributes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:30.886244399Z","created_by":"bob","updated_at":"2026-01-24T23:14:55.077572883Z","closed_at":"2026-01-24T23:14:55.077555119Z","close_reason":"Implemented snapshot command with --raw flag for ANSI codes","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli","phase-4"],"dependencies":[{"issue_id":"bd-1dc","depends_on_id":"bd-2we","type":"blocks","created_at":"2026-01-24T22:57:05.339106209Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1dk","title":"Implement attach command (TTY bridging)","description":"Bridge user terminal to agent PTY. Put user terminal in raw mode. Forward input/output bidirectionally. Handle window resize (SIGWINCH).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:36.637525267Z","created_by":"bob","updated_at":"2026-01-25T14:26:47.201881672Z","closed_at":"2026-01-25T14:26:47.201860753Z","close_reason":"Implemented attach mode with Ctrl+A d detach sequence and readonly option","source_repo":".","compaction_level":0,"original_size":0,"labels":["attach","phase-5"],"dependencies":[{"issue_id":"bd-1dk","depends_on_id":"bd-30f","type":"blocks","created_at":"2026-01-24T22:57:08.582902142Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1gi","title":"Fix auto-resize: wrong sizes and no dynamic resizing","description":"See docs/auto-resize-fix-notes.md for detailed progress notes.\n\n## Summary\n\nFixed auto-resize in botty view by switching from `tail --follow --raw` to `attach --readonly`:\n\n1. **Server sends initial screen render** - After AttachStarted, renders full screen state\n2. **Attach handles SIGWINCH** - Forwards resize events to server, agent redraws\n3. **Auto-resize on by default** - Changed from --auto-resize flag to --no-resize\n\n## Acceptance criteria:\n- [x] Agents resize to correct pane dimensions on view\n- [x] Agents resize dynamically when tmux panes are resized\n- [x] Works in both panes and windows modes\n- [x] Clean display for TUI programs after resize","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T21:10:32.477606438Z","created_by":"bob","updated_at":"2026-01-27T18:20:54.025787181Z","closed_at":"2026-01-27T18:20:54.025759059Z","close_reason":"Fixed by switching to attach --readonly with server-side initial screen render and SIGWINCH handling","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1jm","title":"Consider renaming 'agent' to 'pty' or 'session' in data model","description":"The tool was built for spawning agents, but it's really a PTY manager that could be used for anything (TUI development, terminal multiplexing, screen capture).\n\nCurrent naming ('agent') is confusing when spawning non-agent programs like htop.\n\nOptions:\n- `pty` - technically accurate, jargon-y\n- `session` - tmux-like, generic\n- `terminal` / `term` - user-friendly\n\nWould affect:\n- CLI output ('agents' → 'sessions' or 'ptys')\n- Protocol: SpawnAgent → Spawn, AgentId → SessionId/PtyId\n- Code: struct Agent → struct Session/Pty\n- Docs, error messages, help text\n\nNote: The name 'botty' itself implies bots/agents but could just be quirky branding.","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-27T19:51:57.100877223Z","created_by":"bob","updated_at":"2026-01-27T19:51:57.100877223Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1pf","title":"Fix --replay missing newline between snapshot and stream","description":"When using 'botty tail --replay', the snapshot output doesn't include a trailing newline, causing the first streamed line to concatenate with the last snapshot line.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T22:28:50.101067545Z","created_by":"bob","updated_at":"2026-01-25T22:29:50.084550699Z","closed_at":"2026-01-25T22:29:50.084522676Z","close_reason":"Added newline after snapshot if content doesn't end with one","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1pk","title":"Design and implement agent orchestration test framework","description":"Create a testing framework for the primary use case: one coding agent spawning and coordinating multiple TUI agents. Need to handle snapshot-based assertions, timing, and realistic multi-agent scenarios.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T16:54:48.793354745Z","created_by":"bob","updated_at":"2026-01-25T16:58:49.291273775Z","closed_at":"2026-01-25T16:58:49.291251243Z","close_reason":"Completed test framework with TestHarness, AgentHandle, wait_for_* methods, prompt detection, and 7 orchestration scenarios","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1tr","title":"Support unique tmux session names per view instance","description":"From security review cr-klwd (th-grfz):\n\nThe session name is hardcoded as 'botty', which means multiple views could interfere with each other. Consider generating unique session names per view instance, or adding a --session flag.","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-27T23:52:23.373762964Z","created_by":"bob","updated_at":"2026-01-27T23:52:23.373762964Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1tw","title":"Server skeleton with Unix socket listener","description":"Create server module with tokio-based Unix socket listener, handle incoming connections, dispatch to request handlers. Include auto-fork/daemonize logic.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:00.130881750Z","created_by":"bob","updated_at":"2026-01-24T23:14:29.635454729Z","closed_at":"2026-01-24T23:14:29.635436835Z","close_reason":"Implemented server with Unix socket listener, request handling, PTY output polling","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-1","server"],"dependencies":[{"issue_id":"bd-1tw","depends_on_id":"bd-1yh","type":"blocks","created_at":"2026-01-24T22:56:51.030195796Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1v7","title":"Use SIGKILL as default for kill command","description":"Interactive shells (bash) ignore SIGTERM, requiring users to remember -9. Change default to SIGKILL for reliable cleanup. Add --term flag for graceful SIGTERM when needed.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:53:21.092466052Z","created_by":"bob","updated_at":"2026-01-25T17:59:42.756538453Z","closed_at":"2026-01-25T17:59:42.756505772Z","close_reason":"Implemented in commit defabd5","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1vl","title":"Consider explicit protocol framing for attach","description":"From security review cr-qmr8 (th-r7r3):\n\n## Original Report\n[MEDIUM] Protocol framing ambiguity. The code mixes JSON messages and raw binary PTY data on the same connection, relying on timing-based delimiters to distinguish them. This is fragile and could lead to protocol confusion attacks where PTY output is misinterpreted as control messages.\n\n## Current Decision: Won't Fix\n\nDeclined because:\n\n1. **Local IPC only** - There's no network attacker. The only parties are the client and server, both running as you.\n\n2. **Direction matters** - The \"confusion\" would be PTY output (from agent → client) being misinterpreted as server control messages. But PTY output flows in one direction after attach starts—there's no parsing of it as JSON.\n\n3. **In practice it works** - The initial JSON response is read before entering the raw I/O bridge. After that, everything is just PTY data forwarded to stdout.\n\n4. **Proper fix is expensive** - Length-prefixed framing or out-of-band signaling would require protocol changes, version negotiation, and client/server coordination. Overkill for a local tool.\n\n## If Revisited\nIf botty needs bidirectional control messages during attach (e.g., server-initiated disconnect, bandwidth throttling), proper framing would be needed. Options:\n- Length-prefixed binary framing (like HTTP/2)\n- Magic byte prefix for control messages (e.g., 0x00 + length + JSON)\n- Separate control socket","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-27T19:13:38.556509540Z","created_by":"bob","updated_at":"2026-01-27T19:13:38.556509540Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1x7","title":"Consider moving SIGWINCH signaling server-side","description":"From security review cr-qmr8 (th-bepr):\n\n## Original Report\n[CRITICAL] Unsafe signal sending to arbitrary PIDs. The server returns a PID which the client trusts and sends SIGWINCH to. A malicious or compromised server could return any PID, causing signals to be sent to unrelated processes. Additionally, PID reuse attacks are possible - if the original process dies and another process takes its PID, you'll signal the wrong process.\n\n## Current Decision: Won't Fix\n\nDeclined because:\n\n1. **Threat model mismatch** - botty is local IPC over a Unix socket. The server runs as the same user, on the same machine. If an attacker can compromise the server or MITM the socket, they already have code execution as your user—sending SIGWINCH to a process is the least of your problems.\n\n2. **We control the PID source** - The PID comes from our own spawn operation. The server tracks which PIDs it spawned. There's no external input.\n\n3. **SIGWINCH is benign** - Even if somehow the wrong process received it, SIGWINCH just tells a process \"your terminal resized.\" Most processes ignore it entirely. It can't cause privilege escalation or data corruption.\n\n4. **Fix would add complexity** - Moving signaling server-side means the server needs to track which attach clients want resize notifications, adding state and message types for minimal security benefit.\n\n## If Revisited\nIf botty ever supports remote connections or multi-user scenarios, this should be reconsidered. The fix would be to add a Request::SendSignal { agent_id, signal } that the server validates before forwarding.","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-27T19:13:32.703734159Z","created_by":"bob","updated_at":"2026-01-27T19:13:32.703734159Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1yh","title":"Protocol types (Request/Response enums)","description":"Define all message types for client-server IPC: Spawn, List, Kill, Send, SendBytes, Tail, Dump, Snapshot, Attach, Shutdown requests and corresponding responses","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:55:58.326724784Z","created_by":"bob","updated_at":"2026-01-24T23:05:27.242478047Z","closed_at":"2026-01-24T23:05:27.242455404Z","close_reason":"Implemented Request/Response enums with serde serialization and unit tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-1","protocol"]}
{"id":"bd-1z6","title":"Add integration tests for attach mode","description":"Attach mode has zero test coverage. Need tests for: attach/detach flow, detach key sequence, read-only mode, agent exit during attach.","status":"closed","priority":2,"issue_type":"test","created_at":"2026-01-25T16:38:50.355687112Z","created_by":"bob","updated_at":"2026-01-25T16:45:14.684777835Z","closed_at":"2026-01-25T16:45:14.684754251Z","close_reason":"Added 5 integration tests for attach mode: attach/detach, readonly, nonexistent agent, output reception, agent exit","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-20t","title":"Attach mode drops input after typing a few characters","description":"Input to attached terminal is inconsistent - works fine initially but progressively drops more input after typing a few characters. Likely a bug in the I/O bridge or buffering logic.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T16:28:34.157160740Z","created_by":"bob","updated_at":"2026-01-25T16:29:56.593273860Z","closed_at":"2026-01-25T16:29:56.593255726Z","close_reason":"Fixed: background pty_reader_task was competing with attach bridge for PTY reads. Added 'attached' flag to skip agents during attach.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-21i","title":"Structured agent messaging protocol","description":"Agents can emit __BOTTY_MSG:{json}__ markers. Orchestrator retrieves via 'botty recv <id>'. Enables agents to communicate structured data back.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-25T21:03:08.873438507Z","created_by":"bob","updated_at":"2026-01-26T20:36:29.721729992Z","closed_at":"2026-01-26T20:36:29.721701418Z","close_reason":"Won't implement - botbus provides this functionality already (send, history, watch, inbox). Explicit botbus calls are cleaner than parsing markers from stdout.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-21w","title":"Change list to show only running agents by default, add --all flag","description":"botty list should only show running agents. Add --all to include exited ones. Keeps the list clean for active orchestration.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:06:57.633794765Z","created_by":"bob","updated_at":"2026-01-25T17:11:14.892288115Z","closed_at":"2026-01-25T17:11:14.892265633Z","close_reason":"Implemented in commit 5b6b3b1","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-227","title":"Implement tail --follow for streaming output","description":"The --follow flag exists but isn't implemented. Should stream new output as it arrives, essential for watching long-running commands.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:07:06.180663283Z","created_by":"bob","updated_at":"2026-01-25T17:18:54.170806032Z","closed_at":"2026-01-25T17:18:54.170777708Z","close_reason":"Implemented in commit 41400ee","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-22f","title":"Add TOON output format for list command","description":"Default to TOON format for list output (token-efficient for LLMs). Add --json flag for piping to jq. Use the toon-format crate (official implementation) for encoding. TOON is ideal for tabular agent data.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-25T17:51:03.925724764Z","created_by":"bob","updated_at":"2026-01-25T17:55:41.163876763Z","closed_at":"2026-01-25T17:55:41.163852056Z","close_reason":"Implemented in commit e9c7bab","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-22v","title":"Implement send command (UTF-8 input)","description":"Write UTF-8 text to agent PTY. Support --newline flag to auto-append \\n.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:56:19.955401859Z","created_by":"bob","updated_at":"2026-01-24T23:14:48.062781759Z","closed_at":"2026-01-24T23:14:48.062763815Z","close_reason":"Implemented send command with --no-newline flag","source_repo":".","compaction_level":0,"original_size":0,"labels":["io","phase-3"],"dependencies":[{"issue_id":"bd-22v","depends_on_id":"bd-30f","type":"blocks","created_at":"2026-01-24T22:57:01.672466658Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-24f","title":"Keep server alive for persistent view mode","description":"Currently the server shuts down when no PTYs are active, which kills the tmux session and kicks you out of botty view.\n\nDesired behavior:\n1. Run `botty view`\n2. Opens tmux session with 'waiting for agents...' placeholder\n3. Autonomous agent runs `botty spawn` → PTY appears in tmux\n4. PTY terminates → goes back to 'waiting for agents...'\n5. Repeat - view stays open as a persistent dashboard\n\nThis enables using botty view as a monitoring dashboard for agent orchestration, where agents spawn and terminate over time.\n\nImplementation considerations:\n- Server needs to stay alive when PTY count goes to zero\n- View mode needs a placeholder pane/message when no PTYs exist\n- May want different behavior for `view` (persistent) vs other commands (ephemeral)\n- Consider `--keep-alive` flag or make it default for view mode","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T19:52:01.350993385Z","created_by":"bob","updated_at":"2026-01-28T00:38:23.554539513Z","closed_at":"2026-01-28T00:38:23.554510539Z","close_reason":"Implemented in v0.3.0 - persistent view mode with waiting placeholder","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-29c","title":"View shows panes for killed agents","description":"After killing an agent, 'botty view' still shows a pane for it. The view command should only show running agents, and the event loop should properly remove panes when agents exit.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T22:28:50.310819489Z","created_by":"bob","updated_at":"2026-01-25T22:30:47.449169684Z","closed_at":"2026-01-25T22:30:47.449141681Z","close_reason":"Kill and recreate tmux session on view to avoid stale panes","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-29o","title":"Add --name flag to spawn for custom agent IDs","description":"Allow botty spawn --name my-worker -- bash. Makes it easier to refer to agents by role rather than random names.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:06:53.555304164Z","created_by":"bob","updated_at":"2026-01-25T17:14:59.857619964Z","closed_at":"2026-01-25T17:14:59.857394882Z","close_reason":"Implemented in commit f4256f0","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-29w","title":"CLI with clap (command definitions)","description":"Create CLI using clap derive macros: spawn, list, kill, send, send-bytes, tail, dump, snapshot, attach, server subcommands. Wire up to client calls.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:07.984935732Z","created_by":"bob","updated_at":"2026-01-24T23:14:29.810131653Z","closed_at":"2026-01-24T23:14:29.810113439Z","close_reason":"Implemented CLI with clap: spawn, list, kill, send, send-bytes, tail, dump, snapshot, attach, server, shutdown","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli","phase-1"],"dependencies":[{"issue_id":"bd-29w","depends_on_id":"bd-1yh","type":"blocks","created_at":"2026-01-24T22:56:51.198630517Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-29w","depends_on_id":"bd-33s","type":"blocks","created_at":"2026-01-24T22:56:51.283587748Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2d2","title":"Fix clippy: add #[must_use] attributes","description":"Add #[must_use] attributes to ~27 functions that return values which shouldn't be silently discarded","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-25T19:40:28.032193429Z","created_by":"bob","updated_at":"2026-01-25T19:51:12.330870849Z","closed_at":"2026-01-25T19:51:12.330855470Z","close_reason":"Fixed all clippy lints","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2e6","title":"Create TestHarness struct for managing server lifecycle","description":"A test harness that handles server startup, client creation, and cleanup. Should support unique socket paths per test.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T16:55:10.746799681Z","created_by":"bob","updated_at":"2026-01-25T16:56:49.185011917Z","closed_at":"2026-01-25T16:56:49.184992792Z","close_reason":"Implemented TestHarness, AgentHandle, wait_for_content, wait_for_pattern, and wait_for_stable in testing module","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2fw","title":"Fix FD lifetime issue in attach bridge - potential use-after-free","description":"In run_attach_bridge(), pty_fd is captured at attach start but the agent could be removed while the bridge is running. After drop(mgr), the fd may become invalid on next iteration. Need Arc<OwnedFd> or verify agent exists after each lock acquisition.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T16:38:45.427512414Z","created_by":"bob","updated_at":"2026-01-25T16:42:01.663943478Z","closed_at":"2026-01-25T16:42:01.663925104Z","close_reason":"Fixed by always acquiring lock before using PTY fd, never passing raw fd across async boundaries","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2hj","title":"View event loop doesn't track existing panes","description":"The event loop in run_view_event_loop creates a fresh TmuxView with empty active_panes. This causes: (1) new agents to replace existing panes instead of adding, (2) session to close when any agent exits because is_empty() returns true. Need to initialize event loop with existing agent IDs.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T23:15:04.538250190Z","created_by":"bob","updated_at":"2026-01-25T23:20:39.878806675Z","closed_at":"2026-01-25T23:20:39.878779654Z","close_reason":"Pass existing agent IDs to event loop and initialize tracking with mark_pane_exists()","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2j5","title":"Fix clippy: add const fn where possible","description":"Add const to ~12 functions that can be evaluated at compile time","status":"closed","priority":4,"issue_type":"chore","created_at":"2026-01-25T19:40:30.863433317Z","created_by":"bob","updated_at":"2026-01-25T19:51:12.327809139Z","closed_at":"2026-01-25T19:51:12.327786547Z","close_reason":"Fixed all clippy lints","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2pm","title":"Output subscriptions: botty subscribe","description":"Stream output from one or more agents as it arrives. Multiplexed streaming for watching multiple workers from one coordinator.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T21:03:07.179848140Z","created_by":"bob","updated_at":"2026-01-26T19:29:56.231469415Z","closed_at":"2026-01-26T19:29:56.231446081Z","close_reason":"Implemented botty subscribe command for streaming agent output","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ps","title":"Agent struct and state management","description":"Define Agent struct: id (adjective-noun), pid, pty_fd, state enum (Running/Stopped/Exited), exit_code. Use names crate for ID generation with collision handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:10.171235952Z","created_by":"bob","updated_at":"2026-01-24T23:14:29.898809090Z","closed_at":"2026-01-24T23:14:29.898791547Z","close_reason":"Implemented Agent struct with id, command, pty, state, transcript, screen","source_repo":".","compaction_level":0,"original_size":0,"labels":["agent","phase-2"],"dependencies":[{"issue_id":"bd-2ps","depends_on_id":"bd-paz","type":"blocks","created_at":"2026-01-24T22:56:56.646071317Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2ri","title":"Implement tail command","description":"Read last N lines from transcript. Support --follow mode for streaming new output.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:56:24.084199144Z","created_by":"bob","updated_at":"2026-01-24T23:14:55.258281169Z","closed_at":"2026-01-24T23:14:55.258263776Z","close_reason":"Implemented tail command (follow mode pending)","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli","phase-3"],"dependencies":[{"issue_id":"bd-2ri","depends_on_id":"bd-t3q","type":"blocks","created_at":"2026-01-24T22:57:01.840320690Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2vo","title":"Implement wait_for_content with polling and timeout","description":"Poll snapshot until content matches (substring or regex), with configurable timeout. Replaces brittle sleep-based waits.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T16:55:10.976675949Z","created_by":"bob","updated_at":"2026-01-25T16:56:49.206412982Z","closed_at":"2026-01-25T16:56:49.206399216Z","close_reason":"Implemented TestHarness, AgentHandle, wait_for_content, wait_for_pattern, and wait_for_stable in testing module","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2vo","depends_on_id":"bd-u1p","type":"blocks","created_at":"2026-01-25T16:55:15.596511921Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2we","title":"Virtual screen model with vt100 crate","description":"Integrate vt100 crate for VT/ANSI screen parsing. Feed PTY output to parser. Track rows x cols, cursor position, alt-screen state.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:29.643055008Z","created_by":"bob","updated_at":"2026-01-24T23:14:47.803720088Z","closed_at":"2026-01-24T23:14:47.803667850Z","close_reason":"Implemented Screen struct with vt100 parser, process, snapshot, cursor_position methods","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-4","screen"],"dependencies":[{"issue_id":"bd-2we","depends_on_id":"bd-30f","type":"blocks","created_at":"2026-01-24T22:57:05.242664127Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2y9","title":"Create multi-agent orchestration test scenarios","description":"Write example tests demonstrating: spawn multiple agents, coordinate between them, assert on each agent's state.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:55:11.327896103Z","created_by":"bob","updated_at":"2026-01-25T16:58:45.606471473Z","closed_at":"2026-01-25T16:58:45.606452758Z","close_reason":"Created 7 orchestration test scenarios covering: multi-worker spawning, agent pipelines, stateful agents, failure isolation, rapid spawn/kill, concurrent commands, TUI screen updates","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2y9","depends_on_id":"bd-2vo","type":"blocks","created_at":"2026-01-25T16:55:15.975305931Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-2y9","depends_on_id":"bd-7sn","type":"blocks","created_at":"2026-01-25T16:55:16.100763298Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2yg","title":"Auto-resize agents to match tmux pane size","description":"When viewing agents in tmux, resize each agent's PTY to match its tmux pane dimensions. Could use tmux hooks (pane-resized) or periodic polling to detect size changes and call 'botty resize' accordingly. Need to investigate feasibility.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-26T19:19:37.095143195Z","created_by":"bob","updated_at":"2026-01-26T20:54:35.497310599Z","closed_at":"2026-01-26T20:54:35.497292064Z","close_reason":"Added auto-resize of agents to match tmux pane sizes when viewing","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-306","title":"Allow reusing names of exited agents","description":"Currently, spawning an agent with a name that exists (even if exited) fails with 'agent name already in use'. Should allow reusing names of exited agents - either by auto-removing them or by checking state during spawn.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T22:47:43.164484839Z","created_by":"bob","updated_at":"2026-01-25T22:48:43.801886262Z","closed_at":"2026-01-25T22:48:43.801861546Z","close_reason":"Allow reusing names by removing exited agents before spawn","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-30f","title":"Implement spawn command end-to-end","description":"Wire up spawn: CLI -> client -> server -> PTY creation -> agent registration. Return agent ID to client. Verify with list command.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:13.852370713Z","created_by":"bob","updated_at":"2026-01-24T23:14:36.896204990Z","closed_at":"2026-01-24T23:14:36.896187467Z","close_reason":"Implemented as part of CLI and server work - spawn works end-to-end","source_repo":".","compaction_level":0,"original_size":0,"labels":["integration","phase-2"],"dependencies":[{"issue_id":"bd-30f","depends_on_id":"bd-29w","type":"blocks","created_at":"2026-01-24T22:56:56.989928642Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-30f","depends_on_id":"bd-paz","type":"blocks","created_at":"2026-01-24T22:56:57.074175111Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-30f","depends_on_id":"bd-yon","type":"blocks","created_at":"2026-01-24T22:56:56.905660321Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-32o","title":"Tmux resize hook errors shown in other sessions","description":"When running botty view, the tmux resize hooks trigger in other tmux sessions too, showing error messages like:\n\n```\n'./target/release/botty resize-panes --mode=panes' returned 1\n'/home/bob/src/botty/target/release/botty resize-panes --mode=panes' returned 1\n```\n\nUser has to press 'q' to dismiss.\n\nThe hook is probably being set at the server level instead of just the botty session, or the resize-panes command is failing when called from outside the botty session context.\n\nShould either:\n1. Scope the hook to only the botty tmux session\n2. Make resize-panes fail silently when not in botty context\n3. Suppress tmux error display for the hook","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-27T20:14:45.530225283Z","created_by":"bob","updated_at":"2026-01-28T00:41:28.946166827Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-33s","title":"Client module for Unix socket IPC","description":"Create client module: connect to socket, send Request, receive Response. Include auto-start logic (fork server on ENOENT/ECONNREFUSED).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:01.675498323Z","created_by":"bob","updated_at":"2026-01-24T23:14:29.722565459Z","closed_at":"2026-01-24T23:14:29.722537637Z","close_reason":"Implemented client with auto-connect, server auto-start, request/response handling","source_repo":".","compaction_level":0,"original_size":0,"labels":["client","phase-1"],"dependencies":[{"issue_id":"bd-33s","depends_on_id":"bd-1yh","type":"blocks","created_at":"2026-01-24T22:56:51.113611930Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-352","title":"Configurable detach sequence for attach mode","description":"Allow users to configure the detach key sequence via CLI flag or config file. Currently hardcoded to Ctrl+G d.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T16:25:26.623262483Z","created_by":"bob","updated_at":"2026-01-25T16:50:44.460194705Z","closed_at":"2026-01-25T16:50:44.460176722Z","close_reason":"Added --detach-key flag with support for ctrl-X, ^X, and single char notation","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-36b","title":"Read-only attach mode","description":"Support --readonly flag for attach: forward output to user but discard input (except detach sequence).","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T22:56:39.865759745Z","created_by":"bob","updated_at":"2026-01-25T14:26:47.211451096Z","closed_at":"2026-01-25T14:26:47.211431770Z","close_reason":"Implemented attach mode with Ctrl+A d detach sequence and readonly option","source_repo":".","compaction_level":0,"original_size":0,"labels":["attach","phase-5"],"dependencies":[{"issue_id":"bd-36b","depends_on_id":"bd-1dk","type":"blocks","created_at":"2026-01-24T22:57:08.763421406Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-36w","title":"Event streaming: botty events","description":"Stream JSON events for agent lifecycle (spawned, output, exited). Enables reactive orchestration without polling. This is the key differentiator from tmux.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T21:03:03.373939566Z","created_by":"bob","updated_at":"2026-01-25T21:43:11.620943452Z","closed_at":"2026-01-25T21:43:11.620924998Z","close_reason":"Implemented event streaming with botty events command","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-37g","title":"Add symlink check for socket path to prevent /tmp attacks","description":"Socket path in /tmp could be symlinked by attacker. Check for symlink before remove/bind, and prefer XDG_RUNTIME_DIR.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T16:38:47.981823422Z","created_by":"bob","updated_at":"2026-01-25T16:42:53.035163586Z","closed_at":"2026-01-25T16:42:53.035141715Z","close_reason":"Added socket permission 0o600 and symlink check in server startup","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-37k","title":"Implement dump command","description":"Export transcript with options: --since timestamp, --format text|jsonl. JSONL includes timestamps per chunk.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T22:56:25.564333718Z","created_by":"bob","updated_at":"2026-01-24T23:14:55.341312040Z","closed_at":"2026-01-24T23:14:55.341291541Z","close_reason":"Implemented dump command with --since and --format options","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli","phase-3"],"dependencies":[{"issue_id":"bd-37k","depends_on_id":"bd-t3q","type":"blocks","created_at":"2026-01-24T22:57:01.923471346Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-37z","title":"TUIs don't update in view/tail --replay","description":"When viewing TUI programs like htop/btop via 'botty view' (which uses tail --replay), the initial screen shows correctly but updates don't render properly. The snapshot outputs rendered text without cursor positioning, then streaming raw escape codes don't align correctly. Need to either: (A) stream periodic snapshots, or (B) stream raw transcript from start and let TUI codes rebuild screen.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T23:03:23.835428553Z","created_by":"bob","updated_at":"2026-01-25T23:09:58.061098698Z","closed_at":"2026-01-25T23:09:58.061079903Z","close_reason":"Fixed by returning full transcript from Tail instead of truncated 4KB chunk. Replay now dumps full transcript and streaming compares correctly.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-387","title":"Add --raw flag to snapshot for ANSI output","description":"snapshot --raw flag exists but has bugs - the vt100 rows_formatted() output includes cursor positioning codes that cause garbled display. Need to investigate vt100 API more carefully or use a different approach. Currently the flag is broken.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:50:59.602150959Z","created_by":"bob","updated_at":"2026-01-25T18:09:08.999932982Z","closed_at":"2026-01-25T18:09:08.999905991Z","close_reason":"Fixed by implementing proper cell-by-cell iteration to emit ANSI codes without cursor positioning sequences","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3af","title":"Change 'No running agents' message to avoid grep confusion","description":"The message 'No running agents' contains the word 'running' which causes naive grep-based checks to match. Change to 'No agents currently running' or similar.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-25T17:53:29.919379297Z","created_by":"bob","updated_at":"2026-01-25T17:55:41.176908912Z","closed_at":"2026-01-25T17:55:41.176882272Z","close_reason":"Implemented in commit e9c7bab","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3b3","title":"Set explicit Unix socket permissions (0o700)","description":"Socket permissions are determined by umask, which could allow other users to connect. Set explicit 0o700 permissions after binding.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T16:38:46.400955227Z","created_by":"bob","updated_at":"2026-01-25T16:42:53.021533346Z","closed_at":"2026-01-25T16:42:53.021514210Z","close_reason":"Added socket permission 0o600 and symlink check in server startup","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3b5","title":"Implement send-bytes command (raw input)","description":"Write raw bytes to agent PTY. Accept hex-encoded or base64 input for control characters, escape sequences, etc.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:56:21.300654415Z","created_by":"bob","updated_at":"2026-01-24T23:14:55.171403547Z","closed_at":"2026-01-24T23:14:55.171385914Z","close_reason":"Implemented send-bytes command with hex-encoded input","source_repo":".","compaction_level":0,"original_size":0,"labels":["io","phase-3"],"dependencies":[{"issue_id":"bd-3b5","depends_on_id":"bd-22v","type":"blocks","created_at":"2026-01-24T22:57:01.757043246Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-3h5","title":"botty view shows blank screen for Claude agents","description":"When running 'botty view' while Claude CLI agents are running, the tmux panes show blank screens instead of the agent output.\n\nReproduction:\n1. Spawn a Claude agent: botty spawn --name test -- claude -p 'hello'\n2. Run botty view\n3. Observe blank pane instead of Claude's output\n\nLikely cause: Claude CLI may use alternate screen buffer or special terminal handling that doesn't work well with the tail --replay approach.\n\nReported during cr-41e6 review when security-reviewer agent was running.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-26T20:14:12.168999935Z","created_by":"bob","updated_at":"2026-01-26T20:21:38.739205556Z","closed_at":"2026-01-26T20:21:38.739177022Z","close_reason":"Not a bug - claude -p outputs text and exits, doesn't launch TUI. View works correctly.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3im","title":"Fix clippy: replace unwrap() with expect()","description":"Replace ~7 uses of unwrap() with expect() to provide better panic messages","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-25T19:40:31.925417775Z","created_by":"bob","updated_at":"2026-01-25T19:51:12.334259992Z","closed_at":"2026-01-25T19:51:12.334243291Z","close_reason":"Fixed all clippy lints","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3kw","title":"Fix clippy: miscellaneous lints","description":"Fix remaining clippy lints: option_if_let_else, doc_markdown backticks, match_same_arms, ignored_unit_patterns, items_after_statements, significant_drop_tightening, cast_sign_loss, cast_possible_truncation, too_many_lines","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-25T19:40:33.605199957Z","created_by":"bob","updated_at":"2026-01-25T19:51:12.337266418Z","closed_at":"2026-01-25T19:51:12.337249767Z","close_reason":"Fixed all clippy lints","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3kx","title":"Detach sequence handling (Ctrl+A d)","description":"Implement detach key sequence: Ctrl+A followed by 'd'. Restore user terminal to normal mode. Return cleanly to shell.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:56:38.262413078Z","created_by":"bob","updated_at":"2026-01-25T14:26:47.208239795Z","closed_at":"2026-01-25T14:26:47.208223664Z","close_reason":"Implemented attach mode with Ctrl+A d detach sequence and readonly option","source_repo":".","compaction_level":0,"original_size":0,"labels":["attach","phase-5"],"dependencies":[{"issue_id":"bd-3kx","depends_on_id":"bd-1dk","type":"blocks","created_at":"2026-01-24T22:57:08.675257065Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-3la","title":"Add kill --all flag","description":"Currently there's no way to kill all PTYs at once. Would be useful for:\n\n- Quick cleanup during development\n- Resetting state without restarting server\n- Scripts that need to ensure clean slate\n\nImplementation:\n- Add `--all` flag to kill command\n- Iterate through all agents and kill each\n- Consider whether to require confirmation for safety","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2026-01-27T19:52:03.682573504Z","created_by":"bob","updated_at":"2026-01-28T00:41:34.429154081Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3m3","title":"Add 'botty exec' convenience command (spawn + send + wait + output)","description":"Single command for the common pattern: spawn agent, run command, wait for completion, return output. Example: botty exec -- ls -la. Returns just the command output, not full screen.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:07:01.827334800Z","created_by":"bob","updated_at":"2026-01-25T17:17:29.461569732Z","closed_at":"2026-01-25T17:17:29.461543913Z","close_reason":"Implemented in commit a93438c","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3mj","title":"Add --env flag to spawn command","description":"Allow setting environment variables for spawned agents with --env KEY=VALUE (repeatable). Also add --env-clear to start with empty environment.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T20:12:16.649730292Z","created_by":"bob","updated_at":"2026-01-25T20:15:16.263887486Z","closed_at":"2026-01-25T20:15:16.263841841Z","close_reason":"Implemented --env KEY=VALUE (repeatable) and --env-clear flags for spawn command","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3q5","title":"Implement list command","description":"Return list of agents with id, pid, state, command, uptime. Format nicely for CLI output.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:56:15.125983932Z","created_by":"bob","updated_at":"2026-01-24T23:14:47.888148610Z","closed_at":"2026-01-24T23:14:47.888130105Z","close_reason":"Implemented list command showing id, pid, state, command","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli","phase-2"],"dependencies":[{"issue_id":"bd-3q5","depends_on_id":"bd-30f","type":"blocks","created_at":"2026-01-24T22:56:57.159012809Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-3sv","title":"Trigger resize when transitioning from placeholder to active pane","description":"When transitioning from the 'Waiting for agents...' placeholder to an active pane, the new pane doesn't take up the full window.\n\nShould trigger a resize or retile when replacing the placeholder with a real agent pane.","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-27T23:34:52.923229350Z","created_by":"bob","updated_at":"2026-01-27T23:34:52.923229350Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3uh","title":"botty view: tmux/zellij integration","description":"Launch a tmux session named 'botty' that shows all agents, one pane per agent (tiled layout). Auto-adapts as agents spawn/exit via event streaming. Each pane runs 'botty tail --replay <id>'. v0: tmux only.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T21:02:58.895737011Z","created_by":"bob","updated_at":"2026-01-25T22:01:46.998976730Z","closed_at":"2026-01-25T22:01:46.998949419Z","close_reason":"Implemented botty view with tmux integration","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3uh","depends_on_id":"bd-36w","type":"blocks","created_at":"2026-01-25T21:11:54.429363846Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-3uh","depends_on_id":"bd-pvj","type":"blocks","created_at":"2026-01-25T21:11:58.423350203Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-7jp","title":"Fix clippy: add missing # Errors doc sections","description":"Add # Errors documentation sections to ~24 functions returning Result","status":"closed","priority":3,"issue_type":"docs","created_at":"2026-01-25T19:40:29.016015686Z","created_by":"bob","updated_at":"2026-01-25T19:51:12.340715043Z","closed_at":"2026-01-25T19:51:12.340693052Z","close_reason":"Fixed all clippy lints","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-7sn","title":"Implement wait_for_stable screen detection","description":"Poll snapshot until screen hasn't changed for N milliseconds. Useful for waiting for TUI to finish rendering.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T16:55:11.090238529Z","created_by":"bob","updated_at":"2026-01-25T16:56:49.209480763Z","closed_at":"2026-01-25T16:56:49.209466446Z","close_reason":"Implemented TestHarness, AgentHandle, wait_for_content, wait_for_pattern, and wait_for_stable in testing module","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-7sn","depends_on_id":"bd-u1p","type":"blocks","created_at":"2026-01-25T16:55:15.731863544Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-8vn","title":"Fix clippy: inline format args","description":"Replace format!(\"{}\", var) with format!(\"{var}\") in ~15 places","status":"closed","priority":4,"issue_type":"chore","created_at":"2026-01-25T19:40:30.075317454Z","created_by":"bob","updated_at":"2026-01-25T19:51:12.317335245Z","closed_at":"2026-01-25T19:51:12.317088202Z","close_reason":"Fixed all clippy lints","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-96m","title":"Agent labels/groups","description":"Add --label flag to spawn. Support 'botty kill --label X', 'botty list --label X', 'botty wait --any --label X --pattern Y'. Makes coordinating N agents tractable.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T21:03:06.702982942Z","created_by":"bob","updated_at":"2026-01-26T19:26:17.454576369Z","closed_at":"2026-01-26T19:26:17.454548156Z","close_reason":"Implemented agent labels/groups feature","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-9im","title":"Add botty doctor command","description":"Diagnostic command to check: socket path writable, daemon running/startable, PTY allocation works, no stale sockets.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T20:12:17.838451876Z","created_by":"bob","updated_at":"2026-01-25T20:17:15.950792992Z","closed_at":"2026-01-25T20:17:15.950758217Z","close_reason":"Implemented botty doctor command with checks for socket, PTY, daemon, and spawn/kill cycle","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-cs6","title":"Strip ANSI codes in tail output by default","description":"tail currently shows raw ANSI escape codes which is confusing. Should strip by default like snapshot does. Add --raw flag to preserve them if needed.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:53:16.617742150Z","created_by":"bob","updated_at":"2026-01-25T18:03:30.543225551Z","closed_at":"2026-01-25T18:03:30.543197609Z","close_reason":"Implemented in commit 284ff65","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-d4h","title":"Kill command should handle already-exited agents gracefully","description":"When running 'botty kill' on an agent that has already exited, it returns an error 'ESRCH: No such process'. Should check agent state first and return a friendlier message like 'agent already exited' or just succeed silently.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-25T22:52:41.260863479Z","created_by":"bob","updated_at":"2026-01-25T22:53:28.006558079Z","closed_at":"2026-01-25T22:53:28.006540416Z","close_reason":"Check agent state before sending signal, return Ok if already exited","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-duu","title":"Spawn dependencies: --after and --wait-for","description":"'botty spawn --after <id>' waits for agent to exit. 'botty spawn --wait-for <id> --pattern ready' waits for pattern. Declarative workflow sequencing.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-25T21:03:10.547648670Z","created_by":"bob","updated_at":"2026-01-26T20:42:19.570493716Z","closed_at":"2026-01-26T20:42:19.570464241Z","close_reason":"Implemented --after and --wait-for flags for spawn dependencies","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-hb4","title":"Screen normalization (strip colors, regex filters)","description":"Implement normalization options: strip ANSI, trim trailing whitespace, optional regex filters for volatile content (timestamps, PIDs).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:56:32.821435914Z","created_by":"bob","updated_at":"2026-01-24T23:15:02.516008756Z","closed_at":"2026-01-24T23:15:02.515990241Z","close_reason":"Implemented - snapshot already strips colors by default, --raw preserves them","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-4","screen"],"dependencies":[{"issue_id":"bd-hb4","depends_on_id":"bd-1dc","type":"blocks","created_at":"2026-01-24T22:57:05.424402706Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-ig7","title":"Add 'botty wait' command for polling until content appears","description":"CLI command to wait until snapshot contains a pattern. Example: botty wait <id> --contains 'Done' --timeout 30s. Essential for orchestration without manual sleeps.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-25T17:06:49.169006170Z","created_by":"bob","updated_at":"2026-01-25T17:11:14.878028622Z","closed_at":"2026-01-25T17:11:14.878004557Z","close_reason":"Implemented in commit 5b6b3b1","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-io5","title":"Implement kill command","description":"Send signal to agent process (SIGTERM default, SIGKILL for --force). Update agent state. Clean up PTY resources.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T22:56:16.388430878Z","created_by":"bob","updated_at":"2026-01-24T23:14:47.974384148Z","closed_at":"2026-01-24T23:14:47.974362147Z","close_reason":"Implemented kill command with SIGTERM default and --force for SIGKILL","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli","phase-2"],"dependencies":[{"issue_id":"bd-io5","depends_on_id":"bd-30f","type":"blocks","created_at":"2026-01-24T22:56:57.243127361Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-jrs","title":"Resource limits: --timeout and --max-output","description":"Auto-kill agents after timeout. Cap transcript size. Prevent runaway agents from eating resources.\n\nAcceptance criteria:\n- [ ] `--timeout <secs>` flag on spawn: auto-kill agent after N seconds\n- [ ] `--max-output <bytes>` flag on spawn: stop recording transcript after limit\n- [ ] Timeout triggers SIGTERM first, then SIGKILL after grace period\n- [ ] Limits visible in `botty list --json` output\n- [ ] Exit reason distinguishes timeout vs normal exit\n- [ ] Unit tests for timeout and output limit behavior\n\nPost-implementation:\n- [ ] Create code review via `crit reviews create`\n- [ ] Request security reviewer and architecture reviewer\n- [ ] Spawn sub-agents to perform reviews using botty\n- [ ] Address any review feedback\n- [ ] Write brief report on the crit experiment\n- [ ] File any crit issues as beads in ~/src/botcrit\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T21:03:11.933312250Z","created_by":"bob","updated_at":"2026-01-26T20:15:06.446633659Z","closed_at":"2026-01-26T20:15:06.446594396Z","close_reason":"Implemented with --timeout and --max-output flags. Security review feedback addressed (exit reason race condition fix, timing precision documented).","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-kel","title":"Add pane banner showing name, processes, and labels","description":"Add a visual banner/header to each pane in botty view showing:\n- Agent name/ID\n- Running process(es)\n- Labels if any\n\nCould use tmux pane-border-format or a custom status line approach.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-27T20:18:32.507892951Z","created_by":"bob","updated_at":"2026-01-27T20:18:32.507892951Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-kkn","title":"View mode: panes vs windows","description":"Add '--mode=<panes|windows>' flag to 'botty view'. Panes (default) shows all agents in split panes in one window. Windows mode creates a separate tmux window per agent, allowing tab-style navigation.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-26T19:19:36.877443574Z","created_by":"bob","updated_at":"2026-01-26T20:54:35.249131544Z","closed_at":"2026-01-26T20:54:35.249102510Z","close_reason":"Added --mode=panes|windows flag to botty view","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-ltb","title":"Add timeout to placeholder infinite loop","description":"From security review cr-klwd (th-gu0z):\n\nThe placeholder command runs 'while true; do sleep 1; done' which runs forever if view is abandoned. Consider adding a maximum lifetime or heartbeat-based self-termination.","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-27T23:52:20.960401980Z","created_by":"bob","updated_at":"2026-01-27T23:52:20.960401980Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-paz","title":"PTY module (openpty, fork, exec helpers)","description":"Create PTY wrapper using nix crate: spawn_pty() that creates PTY pair, forks, sets up session/controlling terminal, execs command. Handle SIGCHLD for child reaping.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:03.888940841Z","created_by":"bob","updated_at":"2026-01-24T23:05:28.115798265Z","closed_at":"2026-01-24T23:05:28.115776525Z","close_reason":"Implemented PTY spawn with fork/exec, signal handling, and tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-1","pty"]}
{"id":"bd-pvj","title":"Add --replay flag to tail command","description":"When tailing with --replay, first output the current screen snapshot (via snapshot --raw), then stream updates. Essential for TUI viewing - without it, joining mid-session shows only incremental updates.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T21:11:54.226666015Z","created_by":"bob","updated_at":"2026-01-25T21:15:32.511532722Z","closed_at":"2026-01-25T21:15:32.511505400Z","close_reason":"Implemented --replay flag for tail command","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-saa","title":"Add exponential backoff to server retry loop","description":"From security review cr-klwd (th-385w):\n\nThe retry loop for server connection runs 50 iterations with 100ms fixed delay. Could add:\n1. Exponential backoff\n2. Check if spawned server process is still alive\n3. Log connection errors for debugging","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-27T23:52:18.412245928Z","created_by":"bob","updated_at":"2026-01-27T23:52:18.412245928Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-t3q","title":"Transcript ring buffer implementation","description":"Per-agent ring buffer for raw PTY output. Fixed size (default 1MB). Store bytes + timestamps. Support byte-range and time-range queries.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:23.060253999Z","created_by":"bob","updated_at":"2026-01-24T23:14:47.712033442Z","closed_at":"2026-01-24T23:14:47.712015689Z","close_reason":"Implemented Transcript struct with ring buffer, append, tail_bytes, since, all methods","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-3","transcript"],"dependencies":[{"issue_id":"bd-t3q","depends_on_id":"bd-30f","type":"blocks","created_at":"2026-01-24T22:57:01.579947146Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-u1p","title":"Create AgentHandle for fluent agent interaction","description":"Wrapper around agent ID with methods like send(), snapshot(), wait_for_content(), wait_for_stable(), kill(). Provides ergonomic API for tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T16:55:10.863621951Z","created_by":"bob","updated_at":"2026-01-25T16:56:49.202774402Z","closed_at":"2026-01-25T16:56:49.202682590Z","close_reason":"Implemented TestHarness, AgentHandle, wait_for_content, wait_for_pattern, and wait_for_stable in testing module","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-u1p","depends_on_id":"bd-2e6","type":"blocks","created_at":"2026-01-25T16:55:15.468652782Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-yon","title":"AgentManager (owns agents, handles requests)","description":"Create AgentManager: HashMap of agents, methods for spawn/list/kill/get. Handle concurrent access. Track agent lifecycle events.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T22:56:11.917269156Z","created_by":"bob","updated_at":"2026-01-24T23:14:29.984578746Z","closed_at":"2026-01-24T23:14:29.984551766Z","close_reason":"Implemented AgentManager with add/get/list/remove, name generation with collision handling","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-2","server"],"dependencies":[{"issue_id":"bd-yon","depends_on_id":"bd-1tw","type":"blocks","created_at":"2026-01-24T22:56:56.821975373Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-yon","depends_on_id":"bd-2ps","type":"blocks","created_at":"2026-01-24T22:56:56.737265024Z","created_by":"bob","metadata":"{}","thread_id":""}]}
